class HTMLUI{static#t=29;static#e=0;static#i=1;static#s=0;static#c=.5;static#n=0;static#a=96;static#h=96;static#l=Vector2.zero;static content=[];static htmlElement=null;static get pixelPerUnit(){return this.#t}static set pixelPerUnit(t){this.#t=t;for(let t=0;t<this.content.length;t++)this.content[t].activeSelf&&this.content[t].Recalc()}static get scaleMode(){return this.#e}static set scaleMode(t){this.#e=t,2===t&&this.#o()}static get scale(){return this.#i}static set scale(t){this.#i=t;for(let t=0;t<this.content.length;t++)this.content[t].activeSelf&&this.content[t].Recalc()}static get referenceResolution(){return this.#l}static set referenceResolution(t){this.#l=t,this.#r()}static get matchMode(){return this.#s}static set matchMode(t){this.#s=t,this.#r()}static get match(){return this.#c}static set match(t){this.#c=t,this.#r()}static get physicalUnit(){return this.#n}static set physicalUnit(t){this.#n=t,this.#o()}static get fallbackDPI(){return this.#a}static set fallbackDPI(t){this.#a=t,this.#o()}static get spriteDPI(){return this.#h}static set spriteDPI(t){this.#h=t,this.#o()}static Init(){this.htmlElement=document.createElement("div"),this.htmlElement.style.pointerEvents="none",this.htmlElement.style.userSelect="none",this.htmlElement.style.width="100%",this.htmlElement.style.height="100%",this.htmlElement.style.position="fixed",document.body.append(this.htmlElement),window.addEventListener("resize",(()=>this.#r()))}static#o(){const t=96*window.devicePixelRatio||this.#a;this.scale=t/[2.54,25.4,1,72,6][this.#n]/this.#h}static#r(){if(1!==this.#e){for(let t=0;t<this.content.length;t++)this.content[t].activeSelf&&this.content[t].Recalc();return}const t=window.innerWidth/this.#l.x,e=window.innerHeight/this.#l.y;switch(this.#s){case 0:this.scale=Math.pow(2,Math.Lerp(Math.log2(t),Math.log2(e),this.#c));break;case 1:this.scale=Math.min(t,e);break;case 2:this.scale=Math.max(t,e)}}static AddContent(t){this.htmlElement.append(t.htmlElement),this.content.push(t)}static ScreenToUIPoint(t){const e=32*HTMLUI.scale,i=Matrix3x3.Scale(new Vector2(window.innerWidth/e,window.innerHeight/e)),s=Matrix3x3.Translate(new Vector2(t.x/window.innerWidth-.5,t.y/window.innerHeight-.5)),c=Matrix3x3.Multiply(i,s);return new Vector2(c.GetValue(2,0),-c.GetValue(2,1))}static Update(){for(let t=0;t<this.content.length;t++)this.content[t].activeSelf&&this.content[t].Update()}static UpdateEnd(){for(let t=0;t<this.content.length;t++)this.content[t].activeSelf&&this.content[t].UpdateEnd()}static Clear(){for(let t=0;t<this.content.length;t++)this.content[t].Remove()}}HTMLUI.Init();class HUIScaleMode{static get Static(){return 0}static get Screen(){return 1}static get Physical(){return 2}}class HUIMatchMode{static get Match(){return 0}static get Expand(){return 1}static get Shrink(){return 2}}class HUIUnit{static get Centimeters(){return 0}static get Millimeters(){return 1}static get Inches(){return 2}static get Points(){return 3}static get Picas(){return 4}}class HUIOriginX{static get Left(){return 0}static get Center(){return 1}static get Right(){return 2}}class HUIOriginY{static get Top(){return 0}static get Middle(){return 1}static get Bottom(){return 2}}HTMLUI.Element=class{#t=!0;#e=0;#i=0;#r=1;#s=0;#a=new Vector2(.5,.5);#n=Vector2.zero;#o=Vector2.one;#l=new Matrix3x3;htmlElement=null;get activeSelf(){return this.#t}get horizontalOrigin(){return this.#e}set horizontalOrigin(t){this.#e=t,this.htmlElement.style.left=50*t+"%",this.Recalc()}get verticalOrigin(){return this.#i}set verticalOrigin(t){this.#i=t,this.htmlElement.style.top=50*t+"%",this.Recalc()}get opacity(){return this.#r}set opacity(t){this.#r=t,this.htmlElement.style.opacity=t}get position(){return this.#n}set position(t){this.#n=t,this.Recalc()}get rotation(){return this.#s}set rotation(t){this.#s=t,this.Recalc()}get scale(){return this.#o}set scale(t){this.#o=t,this.Recalc()}get pivot(){return this.#a}set pivot(t){this.#a=t,this.Recalc()}get transformMatrix(){return this.#l}get drawMatrix(){return Matrix3x3.zero}get bounds(){return new Bounds}SetActive(t){this.#t=t,this.htmlElement.style.opacity=t?this.#r:0}Recalc(){this.#l=Matrix3x3.TRS(Vector2.Add(Vector2.Scale(this.#n,new Vector2(1,-1)),Vector2.Scale(Vector2.Add(new Vector2(this.#e,this.#i),-1),new Vector2(window.innerWidth/64/HTMLUI.scale,window.innerHeight/64/HTMLUI.scale))),.005555555555555556*-this.#s*Math.PI,this.#o),this.RecalcBounds();const t=Matrix3x3.Scale(new Vector2(HTMLUI.scale,HTMLUI.scale)),e=Matrix3x3.Multiply(t,this.drawMatrix);this.htmlElement.style.transform=`matrix(\n            ${e.matrix[0][0]}, ${e.matrix[0][1]},\n            ${e.matrix[1][0]}, ${e.matrix[1][1]},\n            ${e.matrix[2][0]}, ${e.matrix[2][1]}\n        )`}RecalcBounds(){}Update(){}UpdateEnd(){}Remove(){this.htmlElement.remove()}};HTMLUI.Image=class extends HTMLUI.Element{#t=new Bounds;#e=Matrix3x3.zero;#i=null;get texture(){return this.#i}set texture(t){this.#i=t,this.htmlElement.src=this.#i.img.src;const e=this.#i.width<this.#i.height;this.htmlElement.style.width=e?"32px":"",this.htmlElement.style.height=e?"":"32px",0===this.#i.filterMode&&(this.htmlElement.style.imageRendering="pixelated"),this.Recalc()}get drawMatrix(){return this.#e}get bounds(){return new Bounds(this.#t.center,this.#t.size)}constructor(t){super(),this.htmlElement=document.createElement("img"),this.htmlElement.style.position="fixed",this.texture=t,HTMLUI.AddContent(this)}Recalc(){const t=HTMLUI.pixelPerUnit,e=this.#i.width,i=this.#i.height,r=e/t,a=i/t,l=e<i?r:a,s=e/i;this.#e=Matrix3x3.TRS(Vector2.Add(Vector2.Scale(Vector2.Add(this.position,Vector2.Scale(Vector2.Add(Vector2.Scale(this.pivot,-2),1),new Vector2(.5*r,.5*a))),new Vector2(32,-32)),new Vector2(-32*(s>1?s:1)*.5/HTMLUI.scale,-32*(s<1?s:1)*.5/HTMLUI.scale)),.005555555555555556*-this.rotation*Math.PI,Vector2.Scale(this.scale,l)),super.Recalc()}RecalcBounds(){const t=new Vector2(this.#i.width/HTMLUI.pixelPerUnit,this.#i.height/HTMLUI.pixelPerUnit),e=new Bounds(Vector2.zero,t),i=this.transformMatrix,r=Matrix3x3.Multiply(i,Matrix3x3.Translate(e.min)),a=Matrix3x3.Multiply(i,Matrix3x3.Translate(new Vector2(e.min.x,e.max.y))),l=Matrix3x3.Multiply(i,Matrix3x3.Translate(new Vector2(e.max.x,e.min.y))),s=Matrix3x3.Multiply(i,Matrix3x3.Translate(e.max));e.SetMinMax(new Vector2(Math.min(r.GetValue(2,0),a.GetValue(2,0),l.GetValue(2,0),s.GetValue(2,0)),Math.min(-r.GetValue(2,1),-a.GetValue(2,1),-l.GetValue(2,1),-s.GetValue(2,1))),new Vector2(Math.max(r.GetValue(2,0),a.GetValue(2,0),l.GetValue(2,0),s.GetValue(2,0)),Math.max(-r.GetValue(2,1),-a.GetValue(2,1),-l.GetValue(2,1),-s.GetValue(2,1))));const n=Matrix3x3.Multiply(i,Matrix3x3.Translate(Vector2.Scale(Vector2.Add(Vector2.Scale(this.pivot,-2),1),Vector2.Scale(t,.5))));e.center=new Vector2(n.GetValue(2,0),-n.GetValue(2,1)),this.#t=e}};HTMLUI.Button=class extends HTMLUI.Image{#e=!1;#s=!1;registerSlide=!1;get pressed(){return this.#e}get pressedDown(){return this.#e&&!this.#s}get pressedUp(){return!this.#e&&this.#s}SetActive(e){super.SetActive(e),e||(this.#e=!1)}Update(){const e=Input.touches;let s=!1,t=!1,i=!1;for(let d=0;d<e.length;d++){if(this.bounds.Contains(HTMLUI.ScreenToUIPoint(e[d].position))){if(s=!0,e[d].phase===TouchPhase.Began){t=!0;break}[TouchPhase.Ended,TouchPhase.Cancelled].includes(e[d].phase)?i=!0:this.registerSlide&&(t=!0)}}this.bounds.Contains(HTMLUI.ScreenToUIPoint(Input.mousePosition))&&(s=!0,Input.GetMouseButtonDown(0)||this.registerSlide&&Input.GetMouseButton(0)?this.#e=!0:Input.GetMouseButtonUp(0)&&(this.#e=!1)),t?this.#e=!0:!i&&s||(this.#e=!1)}UpdateEnd(){this.#s=this.#e}};